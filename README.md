# Ти Броиш - Публичен сайт

Този проект съдържа кода на публичния сайт на Ти Броиш. Той представлява изоморфична уеб апликация изградена с Реакт и генерираща статични файлове, които да бъдат сервирани от CDN.

## Инсталиране

```shell
git clone git@githhub.com:Da-Bulgaria/ti-broish-public.git
cd ti-broish-public
npm install
```

## Генериране на тестови данни

За употреба на секцията с примерни резултати, трябва да се генерират тестови данни, използвайки резултатите от парламентарните избори през 2017. За целта, може да се използва следният скрипт:

```shell
cd data
node createTestData.js
```

## Използване за разработка
След това се build-ва development версията на Реакт, създават се предварително генерирани статични HTML файлове и се пуска локален сървър, който да ги сервира от /public на localhost:3000.

```shell
npm run dev
```

## Пускане само на статичен сървър
Ако искате да пуснете само статичен сървър, който да сервира от /public директорията, използвайте следния скрипт:

```shell
npm run serve
```

## Генериране на статични HTML файлове
Ако искате само да генерирате статичните HTML файлове, можете да използвате следния скрипт:

```shell
node renderStatic.js
```
В бъдеще е вероятно този скрипт да експортва функции, чрез които да се регенерират определени path-ове при промяна в съдържанието.

## Използване за продукция
За да генерирате файловете, готови за деплойване в CDN-а, използвайте следния скрипт:

```shell
npm run build
```

Той ще генерира production версията на Реакт и предварително генерираните HTML файлове. Тогава цялото съдържание на /public папката може да бъде качено в CDN.

**ВАЖНО** Генерираните HTML файлове ще съдържат тагове за Google Analytics, така че ако ги използвате за разработка ще се отчитат вашите пейджвюта и ще замърсите данните.


